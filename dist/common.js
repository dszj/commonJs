var ds=function(){"use strict";var e="1.0.0";let t=navigator.userAgent,n=navigator.userAgent.toLowerCase();var o="micromessenger"==n.match(/MicroMessenger/i),i=o||!!t.match(/(iPhone|iPod|Android|ios|Mobile)/i),r={mobile:i,pc:!i,ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:!!~t.indexOf("Android"),weixin:o,weibo:!!~t.indexOf("weibo"),isTest:-1<window.location.href.search(/localhost|192\.|127\.|10\./)},a={getPara:function(e){var t=location.search;return RegExp("[&|?]"+e+"=([^&$]*)","gi").test(t)?RegExp.$1:""},setPara:function(e,t,n){t=e+"="+t;return(n=n||""+location.href).match(e+"=([^&]*)")?n.replace(RegExp("("+e+"=)([^&]*)","gi"),t):(n="#"==n.substring(n.length-1)?n.substring(0,n.length-1):n).match("[?]")?n+"&"+t:n+"?"+t}};function s(e,t){var n=e,o=[];if(0<n.length)for(var i=0,r=0;r<n.length;r++)!function(e,t){var n;!function(e,t){if(e!=null&&e.length>0){var n=e.length;for(var o=0;o<n;o++)if(e[o]==t)return true}return false}(o,e)?((n=document.createElement("script")).type="text/javascript",n.src=e,t=t||function(){},n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(t(),o.push(e))},document.body.appendChild(n)):t()}(n[r],function(){++i==n.length&&"function"==typeof t&&t()})}function c(e){for(var t=1;t<arguments.length;t++){var n,o=arguments[t];for(n in o)e[n]=o[n]}return e}i=function t(s,r){function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=c({},r,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o,i="";for(o in n)n[o]&&(i+="; "+o,!0!==n[o]&&(i+="="+n[o].split(";")[0]));return document.cookie=e+"="+s.write(t,e)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],n={},o=0;o<t.length;o++){var i=t[o].split("="),r=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(n[a]=s.read(r,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",c({},t,{expires:-1}))},withAttributes:function(e){return t(this.converter,c({},this.attributes,e))},withConverter:function(e){return t(c({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(s)}})}({read:function(e){return(e='"'===e[0]?e.slice(1,-1):e).replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),o={setStorage:function(e,t){t={value:t,time:(new Date).getTime()},t=JSON.stringify(t);localStorage.setItem(e,t)},getStorage:function(e,t){e=localStorage.getItem(e);return e?(e=JSON.parse(e),t=t||(new Date).getTime(),(new Date).getTime()-e.time>t?"":e.value):""}};return console.log(location.href),function(){var e=r,t=r.isTest;navigator.platform.indexOf("Win")&&navigator.platform.indexOf("Mac");var n=a.getPara("vconsole");(e.mobile&&t&&"false"!==n||"true"===n)&&s(["https://cdn.jsdelivr.net/npm/vconsole@3.15.1/dist/vconsole.min.js"],function(){new VConsole})}(),{v:e,version:e,ua:r,getPara:a.getPara,setPara:a.setPara,getStorage:o.getStorage,setStorage:o.setStorage,jsLoad:s,cookie:i,BGMAutoPlayMgr:function(e){this.audioContext=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),this.sourceNode=null,this.buffer=null,this.isPlayingBGM=!1,this.toggleBGM=function(){"object"==typeof this.sourceNode&&(this.isPlayingBGM?(this.sourceNode.stop(),this.isPlayingBGM=!1):this._playSourceNode())},this._playSourceNode=function(){const e=this.audioContext;e.resume();const t=e.createBufferSource();t.buffer=this.buffer,t.loop=!0,t.connect(e.destination),t.start(0),this.sourceNode=t,this.isPlayingBGM=!0},(e=>{const t=this.audioContext,n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onreadystatechange=()=>{n.status<400&&200<=n.status&&4===n.readyState&&t.decodeAudioData(n.response,e=>{this.buffer=e,"undefined"!=typeof WeixinJSBridge?WeixinJSBridge.invoke("getNetworkType",{},()=>this._playSourceNode()):this._playSourceNode()})},n.send()})(e)}}}();
//# sourceMappingURL=common.js.map
